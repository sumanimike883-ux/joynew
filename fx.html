<!--
Fix Pro Tech - Offline Price Lookup with Stock & Sales Tracking

Setup:
1. Place in local server folder (e.g., C:\xampp\htdocs\fixpro-shop\index.html)
2. Create `images` folder for product images.
3. Create `products.json` with fields: name, price, currency, image, stock, sold.
4. Start XAMPP and visit http://localhost/fixpro-shop/

Sample products.json:
[
  {
    "name": "AirPods Pro (Gen 1)",
    "price": 450,
    "currency": "GHS",
    "image": "images/airpodspro.jpg",
    "stock": 20,
    "sold": 5
  },
  {
    "name": "iPhone 12 Screen",
    "price": 350,
    "currency": "GHS",
    "image": "images/iphone12screen.jpg",
    "stock": 15,
    "sold": 3
  }
]
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fix Pro Tech — Price Lookup & Stock</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#93a5b8;--white:#eef2f7}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Arial}
    body{margin:0;background:radial-gradient(ellipse at 10% 10%, #071428 0,#071428 20%, #071b2b 100%);color:var(--white);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .container{width:100%;max-width:980px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    .logo{width:58px;height:58px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:14px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    .searchRow{display:flex;gap:12px;align-items:center}
    .search{flex:1;display:flex;align-items:center;background:rgba(255,255,255,0.03);padding:10px;border-radius:10px}
    .search input{flex:1;background:transparent;border:0;color:var(--white);outline:none;font-size:16px}
    .help{font-size:13px;color:var(--muted)}
    .results{margin-top:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:12px}
    .item{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015));padding:12px;border-radius:10px;display:flex;flex-direction:column;gap:8px}
    .thumb{width:100%;height:150px;border-radius:8px;background:#071426;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .name{font-weight:700;font-size:15px}
    .price{font-size:15px;color:var(--accent);font-weight:800}
    .stock{font-size:13px;color:var(--muted)}
    .muted{color:var(--muted);font-size:12px}
    .notfound{padding:28px;border-radius:10px;text-align:center;color:var(--muted)}
    footer{margin-top:12px;color:var(--muted);font-size:13px}
    @media (max-width:560px){.searchRow{flex-direction:column;align-items:stretch}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">FP</div>
      <div>
        <h1>Fix Pro Tech — Price & Stock Lookup</h1>
        <p class="lead">Type product name to show picture, name, price, stock, and sales — offline, fast, and simple.</p>
      </div>
    </header>

    <div class="card">
      <div class="searchRow">
        <div class="search">
          <input id="q" placeholder="Search product..." autocomplete="off" />
        </div>
        <div class="help">Matches as you type • Use partial names</div>
      </div>

      <div id="results" class="results"></div>
      <div id="notfound" class="notfound" style="display:none">No products match that search.</div>

      <footer>Admin tip: edit <code>products.json</code> to update data.</footer>
    </div>
  </div>

  <script>
    const USE_EXTERNAL_JSON = true;
    const INLINE_PRODUCTS = [
      { name: "AirPods Pro (Gen 1)", price: 450, currency: "GHS", image: "20250625_074514.jpg", stock: 20, sold: 5 },
      { name: "iPhone 12 Screen", price: 350, currency: "GHS", image: "images/iphone12screen.jpg", stock: 15, sold: 3 }
    ];
    let products = [];
    const resultsEl = document.getElementById('results');
    const notfoundEl = document.getElementById('notfound');
    const q = document.getElementById('q');

    function priceText(p){ return `${p.currency || 'GHS'} ${p.price}`; }
    function renderList(list){
      resultsEl.innerHTML = '';
      if(!list.length){ notfoundEl.style.display = 'block'; return; }
      notfoundEl.style.display = 'none';
      list.forEach(p=>{
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `
          <div class="thumb"><img src="${p.image}" alt="${escapeHtml(p.name)}"></div>
          <div class="name">${escapeHtml(p.name)}</div>
          <div class="price">${priceText(p)}</div>
          <div class="stock">Stock: ${p.stock || 0} • Sold: ${p.sold || 0}</div>
        `;
        resultsEl.appendChild(item);
      });
    }
    function escapeHtml(str){return String(str).replace(/[&<>\"]/g,s=>({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;'}[s]));}
    function normalize(s){return s.toLowerCase().trim();}
    function search(qs){
      const term = normalize(qs);
      if(!term) return products;
      return products.filter(p=>normalize(p.name).includes(term));
    }
    q.addEventListener('input', e=>{renderList(search(e.target.value));});
    async function loadProducts(){
      if(USE_EXTERNAL_JSON){
        try{
          const resp = await fetch('products.json', {cache: 'no-store'});
          if(!resp.ok) throw new Error();
          products = await resp.json();
        }catch(e){
          products = INLINE_PRODUCTS;
        }
      }else products = INLINE_PRODUCTS;
      renderList(products);
    }
    loadProducts();
  </script>
</body>
</html>
